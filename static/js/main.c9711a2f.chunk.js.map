{"version":3,"sources":["App/Map/assets/fool.jpeg","App/Map/assets/magician.jpeg","App/Map/assets/vereton.jpeg","App/Map/domain/SpriteEntity.ts","App/Map/Map.tsx","App/Header/Header.tsx","App/App.tsx","App/hooks.ts","reportWebVitals.ts","index.tsx","App/App.module.scss","App/Header/Header.module.scss"],"names":["SpriteEntity","name","spriteSource","width","height","dragging","sprite","diffX","diffY","this","Sprite","from","interactive","on","event","data","target","global","x","y","createTarotSprite","spriteName","getSprite","Map","app","view","stage","useEffect","element","document","getElementById","parentNode","replaceChild","veretonSprite","vereton","addChild","fool","magician","id","Header","getVereton","children","className","styles","appHeader","onSubmit","e","load","mappedCards","JSON","parse","atob","reduce","acc","curr","forEach","child","error","alert","loadState","autoComplete","onClick","cards","map","prompt","btoa","stringify","type","App","windowSize","useState","setWindowSize","handleResize","window","innerWidth","innerHeight","addEventListener","removeEventListener","useWindowSize","setApp","Application","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","module","exports"],"mappings":"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","file":"static/js/main.c9711a2f.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/fool.b3ab9355.jpeg\";","export default __webpack_public_path__ + \"static/media/magician.442adec3.jpeg\";","export default __webpack_public_path__ + \"static/media/vereton.c8e9ebd3.jpeg\";","import { InteractionEvent, Sprite } from \"pixi.js\";\n\nexport class SpriteEntity {\n  private dragging = false;\n  private sprite: Sprite;\n\n  private diffX = 0;\n  private diffY = 0;\n\n  constructor(name: string, spriteSource: string, width: number, height: number) {\n    this.sprite = Sprite.from(spriteSource);\n    this.sprite.width = width;\n    this.sprite.height = height;\n\n    this.sprite.interactive = true;\n\n    this.sprite.name = name;\n\n    const onDragStart = (event: InteractionEvent) => {\n      const { data, target } = event;\n      if (target.name === this.sprite.name) {\n        this.diffX = data.global.x - target.x;\n        this.diffY = data.global.y - target.y;\n        this.dragging = true;\n      }\n    }\n\n    const onDragMove = (event: InteractionEvent) => {\n      if (this.dragging) {\n        const { data } = event;\n        this.sprite.x = (data.global.x - this.diffX);\n        this.sprite.y = (data.global.y - this.diffY);\n      }\n    }\n\n    const onDragStop = () => {\n      this.dragging = false;\n    }\n\n    this.sprite\n      .on('pointerdown', onDragStart)\n      .on('mousemove', onDragMove)\n      .on('pointerup', onDragStop);\n  }\n\n  public getSprite(): Sprite {\n    return this.sprite;\n  }\n}","import React, { useEffect } from 'react';\nimport { Application } from 'pixi.js';\nimport { fool, magician } from './assets/Tarot'\nimport { vereton } from './assets/Vereton';\nimport { SpriteEntity } from './domain/SpriteEntity';\n\nconst createVeretonSprite = () => {\n  const veretonSprite = new SpriteEntity('vereton', vereton, 1448, 1875);\n  return veretonSprite.getSprite();\n}\n\nconst createTarotSprite = (spriteName: string, sprite: string) => {\n  const tarotSprite = new SpriteEntity(spriteName, sprite, 80, 110);\n  return tarotSprite.getSprite();\n}\n\nexport const Map: React.VFC<{app: Application}> = ({app}) => {\n\n  const { view, stage } = app;\n\n  useEffect(() => {\n    const element = document.getElementById('unique-placeholder-key');\n    element?.parentNode?.replaceChild(view, element);\n\n    const veretonSprite = createVeretonSprite();\n\n    veretonSprite.addChild(\n      createTarotSprite('fool', fool),\n      createTarotSprite('magician', magician),\n    );\n\n    stage.addChild(veretonSprite);\n  });\n\n  return (\n    <section>\n      <div id='unique-placeholder-key'></div>\n    </section>\n  );\n}\n","import React from 'react';\nimport { Application, Sprite } from 'pixi.js';\nimport styles from './Header.module.scss';\nimport { Button, Form, FormValuesData, TextField} from 'precise-ui';\n\ntype CardStateType = {\n  name: string;\n  x: number;\n  y: number\n}\n\n\nexport const Header: React.VFC<{app: Application}> = ({app}) => {\n\n  const { stage } = app;\n\n  const getVereton = () =>  stage.children[0] as Sprite;\n\n  const loadState = (data: FormValuesData) => {\n    try {\n      const { load } = data;\n      const cards: CardStateType[] = JSON.parse(atob(load));\n      const mappedCards = cards.reduce((acc: any, curr: CardStateType) => {\n        acc[curr.name] = curr;\n        return acc;\n      }, {})\n      const children = getVereton().children;\n      children.forEach((child) => {\n        child.x = mappedCards[child.name].x;\n        child.y = mappedCards[child.name].y;\n      })\n    } catch (error) {\n      alert('That chunk is not valid');\n    }\n  }\n\n  const printState = () => {\n    const vereton = getVereton();\n\n    const cards: CardStateType[] = vereton.children.map((child) => ({\n      name: child.name,\n      x: child.x,\n      y: child.y,\n    }));\n\n    prompt(\"Copy to clipboard: \", btoa(JSON.stringify(cards)));\n  }\n\n  return (\n    <header className={styles.appHeader}>\n      <Form onSubmit={e => loadState(e.data)}>\n        <TextField name=\"load\" autoComplete='off' />\n        <Button>Load</Button>\n        <Button onClick={printState} type='button' >Print State</Button>\n      </Form>\n    </header>\n  );\n}\n","import React, { useEffect, useState } from 'react';\nimport styles from './App.module.scss';\nimport { Map } from './Map';\nimport { Application } from 'pixi.js';\nimport { useWindowSize } from './hooks';\nimport { Header } from './Header';\n\nexport const App: React.VFC = () => {\n\n  const windowSize = useWindowSize();\n\n  const [app, setApp] = useState<Application>();\n\n  useEffect(() => {\n    if (windowSize != null) {\n      setApp(new Application({\n        height: windowSize.height - 170,\n        width: windowSize.width,\n      }));\n    }\n  }, [windowSize])\n\n  return app ? (\n    <div className={styles.app}>\n      <Header app={app} />\n      <main>\n        <Map app={app} />\n      </main>\n    </div>\n  ) : <p>Loading ...</p> ;\n}\n\nexport default App;\n","import { useEffect, useState } from 'react';\n\nexport type WindowSize = {\n  width: number;\n  height: number;\n};\n\nexport const useWindowSize = (): WindowSize | undefined => {\n  const [windowSize, setWindowSize] = useState<WindowSize | undefined>();\n\n  const handleResize = () =>\n    setWindowSize({\n      width: window.innerWidth,\n      height: window.innerHeight,\n    });\n\n  useEffect(() => {\n    window.addEventListener('resize', handleResize);\n\n    handleResize();\n\n    return () => {\n      window.removeEventListener('resize', handleResize);\n    };\n  }, []);\n\n  return windowSize;\n};\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport { App } from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app___B2LQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"appHeader\":\"Header_appHeader__34yva\"};"],"sourceRoot":""}